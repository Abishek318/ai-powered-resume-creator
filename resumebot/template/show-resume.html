<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8">
    {% load static %}
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <title>Topic Listing Contact Page</title>
    <!-- CSS FILES -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@500;600;700&family=Open+Sans&display=swap"
        rel="stylesheet">
    <link href="{% static 'css/bootstrap.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap-icons.css' %}" rel="stylesheet">
    <link href="{% static 'css/templatemo-topic-listing.css' %}" rel="stylesheet">
</head>

<body class="topics-listing-page" id="top">
    <main>
        <nav class="navbar navbar-expand-lg">
            <div class="container">
                <a class="navbar-brand" href="/">
                    <i class="bi-back"></i>
                    <span>Topic</span>
                </a>
                <div class="d-lg-none ms-auto me-4">
                    <a href="#top" class="navbar-icon bi-person smoothscroll"></a>
                </div>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
                    aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse" id="navbarNav">
                    <ul class="navbar-nav ms-lg-5 me-lg-auto">
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="/#section_1">Home</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="/#section_2">Browse Topics</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="/#section_3">How it works</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="/#section_4">FAQs</a>
                        </li>
                        <li class="nav-item">
                            <a class="nav-link click-scroll" href="/#section_5">Contact</a>
                        </li>
                        <li class="nav-item dropdown">
                            <a class="nav-link dropdown-toggle" href="#section_5" id="navbarLightDropdownMenuLink"
                                role="button" data-bs-toggle="dropdown" aria-expanded="false">Pages</a>
                            <ul class="dropdown-menu dropdown-menu-light" aria-labelledby="navbarLightDropdownMenuLink">
                                <li><a class="dropdown-item" href="#">Topics Listing</a></li>
                                <li><a class="dropdown-item active" href="#">Contact Form</a></li>
                            </ul>
                        </li>
                    </ul>
                    <div class="d-none d-lg-block">
                        <a href="#top" class="navbar-icon bi-person smoothscroll"></a>
                    </div>
                </div>
            </div>
        </nav>
        <header class="site-header d-flex flex-column justify-content-center align-items-center">
            <div class="container">
                <div class="row align-items-center">
                    <div class="col-lg-5 col-12">
                        <nav aria-label="breadcrumb">
                            <ol class="breadcrumb">
                                <li class="breadcrumb-item"><a href="/">Homepage</a></li>
                                <li class="breadcrumb-item active" aria-current="page">Resume content</li>
                            </ol>
                        </nav>
                        <h2 class="text-white">Resume content</h2>
                    </div>
                </div>
            </div>
        </header>
        <section class="section-padding section-bg">
            <div class="container">
                <div class="row d-flex justify-content-center">
                    <div class="col-lg-12 col-12 d-flex justify-content-center">
                        <h3 class="mb-4 pb-2">Verify the resume content</h3>
                    </div>
                    <div class="col-lg-6 col-12">
                        <form id="resumeForm" class="custom-form contact-form" role="form">
                            {% csrf_token %}
                            <div class="row">
                                <h3>Personal Info</h3>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="inputName" class="form-label">Name</label>
                                    <input type="text" class="form-control" id="name" value="{{ resume.name }}">
                                </div>
                                <div class="col-lg-6 col-md-6 col-12">
                                    <label for="inputemail" class="form-label">Email</label>
                                    <input type="email" class="form-control" id="email"
                                        value="{{ resume.contact_information.email }}">
                                </div>
                                <div class="col-12">
                                    <label for="inputphone" class="form-label">Phone</label>
                                    <input type="tel" class="form-control" id="phone"
                                        value="{{ resume.contact_information.phone_number }}">
                                </div>
                                <div class="col-12">
                                    <label for="inputaddress" class="form-label">Address</label>
                                    <input type="text" class="form-control" id="address"
                                        value="{{ resume.contact_information.address }}">
                                </div>
                                <div class="col-12">
                                    <label for="inputProfessionalSummary" class="form-label">Professional
                                        Summary</label>
                                    <textarea class="form-control"
                                        id="ProfessionalSummary">{{ resume.professional_summary }}</textarea>
                                </div>
                                <!-- Education Section -->
                                <h3 class="my-5">Education</h3>
                                <div id="education_container">
                                    {% for edu in resume.education %}
                                    <div class="education_item">
                                        <h6>Education {{ forloop.counter }}</h6>
                                        <div class="col-12">
                                            <label for="inputdegree_{{ forloop.counter0 }}"
                                                class="form-label">Degree</label>
                                            <input type="text" class="form-control"
                                                id="inputdegree_{{ forloop.counter0 }}"
                                                name="education_{{ forloop.counter0 }}_degree" value="{{ edu.degree }}"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputinstitution_{{ forloop.counter0 }}"
                                                class="form-label">Institution</label>
                                            <input type="text" class="form-control"
                                                id="inputinstitution_{{ forloop.counter0 }}"
                                                name="education_{{ forloop.counter0 }}_institution"
                                                value="{{ edu.institution }}" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputgraduation_year_{{ forloop.counter0 }}"
                                                class="form-label">Graduation year</label>
                                            <input type="text" class="form-control"
                                                id="inputgraduation_year_{{ forloop.counter0 }}"
                                                name="education_{{ forloop.counter0 }}_graduation_year"
                                                value="{{ edu.graduation_year }}" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputCGP_{{ forloop.counter0 }}" class="form-label">CGP</label>
                                            <input type="text" class="form-control" id="inputCGP_{{ forloop.counter0 }}"
                                                name="education_{{ forloop.counter0 }}_CGP" value="{{ edu.CGP }}"
                                                required>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-secondary add-section"
                                        data-section="education">Add Education</button>
                                </div>

                                <!-- Work Experience Section -->
                                <h3 class="my-5">Work Experience</h3>
                                <div id="work_experience_container">
                                    {% for exp in resume.work_experience %}
                                    <div class="work_experience_item">
                                        <h6>Work Experience {{ forloop.counter }}</h6>
                                        <div class="col-12">
                                            <label for="inputjob_title_{{ forloop.counter0 }}" class="form-label">Job
                                                Title</label>
                                            <input type="text" class="form-control"
                                                id="inputjob_title_{{ forloop.counter0 }}"
                                                name="work_experience_{{ forloop.counter0 }}_job_title"
                                                value="{{ exp.job_title }}" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputcompany_{{ forloop.counter0 }}"
                                                class="form-label">Company</label>
                                            <input type="text" class="form-control"
                                                id="inputcompany_{{ forloop.counter0 }}"
                                                name="work_experience_{{ forloop.counter0 }}_company"
                                                value="{{ exp.company }}" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputstart_date_{{ forloop.counter0 }}" class="form-label">Start
                                                Date</label>
                                            <input type="text" class="form-control"
                                                id="inputstart_date_{{ forloop.counter0 }}"
                                                name="work_experience_{{ forloop.counter0 }}_start_date"
                                                value="{{ exp.start_date }}" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputend_date_{{ forloop.counter0 }}" class="form-label">End
                                                Date</label>
                                            <input type="text" class="form-control"
                                                id="inputend_date_{{ forloop.counter0 }}"
                                                name="work_experience_{{ forloop.counter0 }}_end_date"
                                                value="{{ exp.end_date }}" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputresponsibilities_{{ forloop.counter0 }}"
                                                class="form-label">Responsibilities</label>
                                            <textarea class="form-control"
                                                id="inputresponsibilities_{{ forloop.counter0 }}"
                                                name="work_experience_{{ forloop.counter0 }}_responsibilities"
                                                required>{{ exp.responsibilities }}</textarea>
                                        </div>
                                    </div>
                                    {% endfor %}
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-secondary add-section"
                                        data-section="work_experience">Add Work Experience</button>
                                </div>

                                <!-- Soft & hard Skills -->
                                <div class="col-12 mt-5">
                                    <label for="inputSoftSkills" class="form-label">
                                        Soft Skills</label>
                                    <textarea class="form-control" id="SoftSkills">{{ resume.softskills }}</textarea>
                                </div>
                                <div class="col-12 mt-5">
                                    <label for="inputhardSkills" class="form-label">
                                        Hard Skills</label>
                                    <textarea class="form-control" id="HardSkills">{{ resume.softskills }}</textarea>
                                </div>
                                <!-- Certifications Section -->
                                <h3 class="my-5">Certifications</h3>
                                <div id="certifications_container">
                                    {% if resume.certifications %}
                                    {% for cert in resume.certifications %}
                                    <div class="certification_item">
                                        <h6>Certification {{ forloop.counter }}</h6>
                                        <div class="col-12">
                                            <label for="inputcert_name_{{ forloop.counter0 }}"
                                                class="form-label">Certification Name</label>
                                            <input type="text" class="form-control"
                                                id="inputcert_name_{{ forloop.counter0 }}"
                                                name="certification_{{ forloop.counter0 }}_name" value="{{ cert.name }}"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputcert_institution_{{ forloop.counter0 }}"
                                                class="form-label">Institution</label>
                                            <input type="text" class="form-control"
                                                id="inputcert_institution_{{ forloop.counter0 }}"
                                                name="certification_{{ forloop.counter0 }}_institution"
                                                value="{{ cert.institution }}" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputcert_year_{{ forloop.counter0 }}"
                                                class="form-label">Year</label>
                                            <input type="text" class="form-control"
                                                id="inputcert_year_{{ forloop.counter0 }}"
                                                name="certification_{{ forloop.counter0 }}_year" value="{{ cert.year }}"
                                                required>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    {% else %}
                                    <div class="certification_item">
                                        <h6>Certification 1</h6>
                                        <div class="col-12">
                                            <label for="inputcert_name_0" class="form-label">Certification Name</label>
                                            <input type="text" class="form-control" id="inputcert_name_0"
                                                name="certification_0_name" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputcert_institution_0" class="form-label">Institution</label>
                                            <input type="text" class="form-control" id="inputcert_institution_0"
                                                name="certification_0_institution" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputcert_year_0" class="form-label">Year</label>
                                            <input type="text" class="form-control" id="inputcert_year_0"
                                                name="certification_0_year" required>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-secondary add-section"
                                        data-section="certifications">Add Certification</button>
                                </div>

                                <!-- Projects Section -->
                                <h3 class="my-5">Projects</h3>
                                <div id="projects_container">
                                    {% if resume.projects %}
                                    {% for proj in resume.projects %}
                                    <div class="project_item">
                                        <h6>Project {{ forloop.counter }}</h6>
                                        <div class="col-12">
                                            <label for="inputproj_name_{{ forloop.counter0 }}"
                                                class="form-label">Project Name</label>
                                            <input type="text" class="form-control"
                                                id="inputproj_name_{{ forloop.counter0 }}"
                                                name="project_{{ forloop.counter0 }}_name" value="{{ proj.name }}"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputproj_description_{{ forloop.counter0 }}"
                                                class="form-label">Description</label>
                                            <textarea class="form-control"
                                                id="inputproj_description_{{ forloop.counter0 }}"
                                                name="project_{{ forloop.counter0 }}_description"
                                                required>{{ proj.description }}</textarea>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputproj_technologies_{{ forloop.counter0 }}"
                                                class="form-label">Technologies</label>
                                            <input type="text" class="form-control"
                                                id="inputproj_technologies_{{ forloop.counter0 }}"
                                                name="project_{{ forloop.counter0 }}_technologies"
                                                value="{{ proj.technologies|join:', ' }}" required>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    {% else %}
                                    <div class="project_item">
                                        <h6>Project 1</h6>
                                        <div class="col-12">
                                            <label for="inputproj_name_0" class="form-label">Project Name</label>
                                            <input type="text" class="form-control" id="inputproj_name_0"
                                                name="project_0_name" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputproj_description_0" class="form-label">Description</label>
                                            <textarea class="form-control" id="inputproj_description_0"
                                                name="project_0_description" required></textarea>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputproj_technologies_0"
                                                class="form-label">Technologies</label>
                                            <input type="text" class="form-control" id="inputproj_technologies_0"
                                                name="project_0_technologies" required>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-secondary add-section"
                                        data-section="projects">Add Project</button>
                                </div>
                                <!-- Awards Section -->
                                <h3 class="my-5">Awards</h3>
                                <div id="awards_container">
                                    {% if resume.awards %}
                                    {% for award in resume.awards %}
                                    <div class="award_item">
                                        <h6>Award {{ forloop.counter }}</h6>
                                        <div class="col-12">
                                            <label for="inputaward_name_{{ forloop.counter0 }}" class="form-label">Award
                                                Name</label>
                                            <input type="text" class="form-control"
                                                id="inputaward_name_{{ forloop.counter0 }}"
                                                name="award_{{ forloop.counter0 }}_name" value="{{ award.name }}"
                                                required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputaward_institution_{{ forloop.counter0 }}"
                                                class="form-label">Institution</label>
                                            <input type="text" class="form-control"
                                                id="inputaward_institution_{{ forloop.counter0 }}"
                                                name="award_{{ forloop.counter0 }}_institution"
                                                value="{{ award.institution }}" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputaward_year_{{ forloop.counter0 }}"
                                                class="form-label">Year</label>
                                            <input type="text" class="form-control"
                                                id="inputaward_year_{{ forloop.counter0 }}"
                                                name="award_{{ forloop.counter0 }}_year" value="{{ award.year }}"
                                                required>
                                        </div>
                                    </div>
                                    {% endfor %}
                                    {% else %}
                                    <div class="award_item">
                                        <h6>Award 1</h6>
                                        <div class="col-12">
                                            <label for="inputaward_name_0" class="form-label">Award Name</label>
                                            <input type="text" class="form-control" id="inputaward_name_0"
                                                name="award_0_name" required>
                                        </div>
                                        <div class="col-12">
                                            <label for="inputaward_institution_0" class="form-label">Institution</label>
                                            <input type="text" class="form-control" id="inputaward_institution_0"
                                                name="award_0_institution" required>
                                        </div>
                                        <div class="col-12 mb-4">
                                            <label for="inputaward_year_0" class="form-label">Year</label>
                                            <input type="text" class="form-control" id="inputaward_year_0"
                                                name="award_0_year" required>
                                        </div>
                                    </div>
                                    {% endif %}
                                </div>
                                <div class="col-4">
                                    <button type="button" class="btn btn-secondary add-section"
                                        data-section="awards">Add Award</button>
                                </div>

                                <!-- Awards -->
                                <div class="col-12">
                                    <label for="inputlanguages" class="form-label">Languages</label>
                                    <input type="text" class="form-control" id="languages"
                                        value="{{ resume.languages }}">
                                </div>

                                <!-- Submit button to send form data -->
                                <div class="col-lg-4 col-12 ms-auto">
                                    <button type="button" id="submitForm" class="btn btn-primary">Enhance</button>
                                    <a href='{% url "resume_preview" %}' class="btn custom-btn mt-2 mt-lg-3">priview
                                        resume</a>
                                </div>
                        </form>

                    </div>
                </div>
            </div>
        </section>
    </main>
    <footer class="site-footer section-padding">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-12 mb-4 pb-2">
                    <a class="navbar-brand mb-2" href="#">
                        <i class="bi-back"></i>
                        <span>Topic</span>
                    </a>
                </div>
                <div class="col-lg-3 col-md-4 col-6">
                    <h6 class="site-footer-title mb-3">Resources</h6>
                    <ul class="site-footer-links">
                        <li class="site-footer-link-item">
                            <a href="/" class="site-footer-link">Home</a>
                        </li>
                        <li class="site-footer-link-item">
                            <a href="/#section_3" class="site-footer-link">How it works</a>
                        </li>
                        <li class="site-footer-link-item">
                            <a href="/#section_4" class="site-footer-link">FAQs</a>
                        </li>
                        <li class="site-footer-link-item">
                            <a href="/#section_5" class="site-footer-link">Contact</a>
                        </li>
                    </ul>
                </div>
                <div class="col-lg-3 col-md-4 col-6 mb-4 mb-lg-0">
                    <h6 class="site-footer-title mb-3">Information</h6>
                    <p class="text-white d-flex mb-1">
                        <a href="tel: 305-240-9671" class="site-footer-link">305-240-9671</a>
                    </p>
                    <p class="text-white d-flex">
                        <a href="mailto:info@company.com" class="site-footer-link">info@company.com</a>
                    </p>
                </div>
                <div class="col-lg-3 col-md-4 col-12 mt-4 mt-lg-0 ms-auto">
                    <div class="dropdown">
                        <button class="btn btn-secondary dropdown-toggle" type="button" data-bs-toggle="dropdown"
                            aria-expanded="false">English</button>
                        <ul class="dropdown-menu">
                            <li><button class="dropdown-item" type="button">Thai</button></li>
                            <li><button class="dropdown-item" type="button">Myanmar</button></li>
                            <li><button class="dropdown-item" type="button">Arabic</button></li>
                        </ul>
                    </div>
                    <p class="copyright-text mt-lg-5 mt-4">Copyright Â© 2048 Topic Listing Center. All rights reserved.
                        <br><br>Design: <a rel="nofollow" href="https://templatemo.com" target="_blank">TemplateMo</a>
                    </p>
                </div>
            </div>
        </div>
    </footer>
    <!-- JAVASCRIPT FILES -->
    <script src="{% static 'js/jquery.min.js' %}"></script>
    <script src="{% static 'js/bootstrap.bundle.min.js' %}"></script>
    <script src="{% static 'js/jquery.sticky.js' %}"></script>
    <script src="{% static 'js/custom.js' %}"></script>
    <script>
        $(document).ready(function () {
            // Add button click handler
            $('.add-section').click(function () {
                var section = $(this).data('section');
                var container = $('#' + section + '_container');
                var newIndex = container.children('.' + section.slice(0, -1) + '_item').length;

                var newItem = createNewItem(section, newIndex);
                container.append(newItem);
            });

            function createNewItem(section, index) {
                var template = '';
                switch (section) {
                    case 'education':
                        template = `
                    <div class="education_item">
                        <h6>Education ${index + 1}</h6>
                        <div class="col-12">
                            <label for="inputdegree_${index}" class="form-label">Degree</label>
                            <input type="text" class="form-control" id="inputdegree_${index}" name="education_${index}_degree" required>
                        </div>
                        <div class="col-12">
                            <label for="inputinstitution_${index}" class="form-label">Institution</label>
                            <input type="text" class="form-control" id="inputinstitution_${index}" name="education_${index}_institution" required>
                        </div>
                        <div class="col-12">
                            <label for="inputgraduation_year_${index}" class="form-label">Graduation year</label>
                            <input type="text" class="form-control" id="inputgraduation_year_${index}" name="education_${index}_graduation_year" required>
                        </div>
                        <div class="col-12 mb-4">
                            <label for="inputCGP_${index}" class="form-label">CGP</label>
                            <input type="text" class="form-control" id="inputCGP_${index}" name="education_${index}_CGP" required>
                        </div>
                        <button type="button" class="btn btn-danger remove-section mt-2">Remove</button>
                    </div>
                `;
                        break;
                    case 'work_experience':
                        template = `
                    <div class="work_experience_item">
                        <h6>Work Experience ${index + 1}</h6>
                        <div class="col-12">
                            <label for="inputjob_title_${index}" class="form-label">Job Title</label>
                            <input type="text" class="form-control" id="inputjob_title_${index}" name="work_experience_${index}_job_title" required>
                        </div>
                        <div class="col-12">
                            <label for="inputcompany_${index}" class="form-label">Company</label>
                            <input type="text" class="form-control" id="inputcompany_${index}" name="work_experience_${index}_company" required>
                        </div>
                        <div class="col-12">
                            <label for="inputstart_date_${index}" class="form-label">Start Date</label>
                            <input type="text" class="form-control" id="inputstart_date_${index}" name="work_experience_${index}_start_date" required>
                        </div>
                        <div class="col-12">
                            <label for="inputend_date_${index}" class="form-label">End Date</label>
                            <input type="text" class="form-control" id="inputend_date_${index}" name="work_experience_${index}_end_date" required>
                        </div>
                        <div class="col-12 mb-4">
                            <label for="inputresponsibilities_${index}" class="form-label">Responsibilities</label>
                            <textarea class="form-control" id="inputresponsibilities_${index}" name="work_experience_${index}_responsibilities" required></textarea>
                        </div>
                        <button type="button" class="btn btn-danger remove-section mt-2">Remove</button>
                    </div>
                `;
                        break;
                    case 'certifications':
                        template = `
                    <div class="certification_item">
                        <h6>Certification ${index + 1}</h6>
                        <div class="col-12">
                            <label for="inputcert_name_${index}" class="form-label">Certification Name</label>
                            <input type="text" class="form-control" id="inputcert_name_${index}" name="certification_${index}_name" required>
                        </div>
                        <div class="col-12">
                            <label for="inputcert_institution_${index}" class="form-label">Institution</label>
                            <input type="text" class="form-control" id="inputcert_institution_${index}" name="certification_${index}_institution" required>
                        </div>
                        <div class="col-12 mb-4">
                            <label for="inputcert_year_${index}" class="form-label">Year</label>
                            <input type="text" class="form-control" id="inputcert_year_${index}" name="certification_${index}_year" required>
                        </div>
                        <button type="button" class="btn btn-danger remove-section mt-2">Remove</button>
                    </div>
                `;
                        break;
                    case 'projects':
                        template = `
                    <div class="project_item">
                        <h6>Project ${index + 1}</h6>
                        <div class="col-12">
                            <label for="inputproj_name_${index}" class="form-label">Project Name</label>
                            <input type="text" class="form-control" id="inputproj_name_${index}" name="project_${index}_name" required>
                        </div>
                        <div class="col-12">
                            <label for="inputproj_description_${index}" class="form-label">Description</label>
                            <textarea class="form-control" id="inputproj_description_${index}" name="project_${index}_description" required></textarea>
                        </div>
                        <div class="col-12 mb-4">
                            <label for="inputproj_technologies_${index}" class="form-label">Technologies</label>
                            <input type="text" class="form-control" id="inputproj_technologies_${index}" name="project_${index}_technologies" required>
                        </div>
                        <button type="button" class="btn btn-danger remove-section mt-2">Remove</button>
                    </div>
                `;
                        break;
                        case 'awards':
                template = `
                    <div class="award_item">
                        <h6>Award ${index + 1}</h6>
                        <div class="col-12">
                            <label for="inputaward_name_${index}" class="form-label">Award Name</label>
                            <input type="text" class="form-control" id="inputaward_name_${index}" name="award_${index}_name" required>
                        </div>
                        <div class="col-12">
                            <label for="inputaward_institution_${index}" class="form-label">Institution</label>
                            <input type="text" class="form-control" id="inputaward_institution_${index}" name="award_${index}_institution" required>
                        </div>
                        <div class="col-12 mb-4">
                            <label for="inputaward_year_${index}" class="form-label">Year</label>
                            <input type="text" class="form-control" id="inputaward_year_${index}" name="award_${index}_year" required>
                        </div>
                        <button type="button" class="btn btn-danger remove-section mt-2">Remove</button>
                    </div>
                `;
                break;
                }
                return $(template);
            }

            // Remove button click handler (using event delegation)
    $(document).on('click', '.remove-section', function () {
        $(this).closest('.education_item, .work_experience_item, .certification_item, .project_item, .award_item').remove();
        updateSectionNumbers();
    });

    function updateSectionNumbers() {
        $('.education_item').each(function (index) {
            $(this).find('h6').text('Education ' + (index + 1));
        });
        $('.work_experience_item').each(function (index) {
            $(this).find('h6').text('Work Experience ' + (index + 1));
        });
        $('.certification_item').each(function (index) {
            $(this).find('h6').text('Certification ' + (index + 1));
        });
        $('.project_item').each(function (index) {
            $(this).find('h6').text('Project ' + (index + 1));
        });
        $('.award_item').each(function (index) {
            $(this).find('h6').text('Award ' + (index + 1));
        });
    }

    // Form submission
    $('#submitForm').click(function (e) {
        e.preventDefault();
        if (validateForm()) {
            showLoadingScreen();

            var form_data = $('#resumeForm').serializeArray();
            var resume_data = {
                contact_information: {},
                education: [],
                work_experience: [],
                certifications: [],
                projects: [],
                awards: [],
                hard_skills: [],
                soft_skills: [],
                languages: []
            };

            $.each(form_data, function (index, field) {
                var name_parts = field.name.split('_');
                var section = name_parts[0];

                if (section === 'contact') {
                    resume_data.contact_information[name_parts.slice(2).join('_')] = field.value;
                } else if (['education', 'work_experience', 'certifications', 'projects', 'awards'].includes(section)) {
                    var itemIndex = parseInt(name_parts[1]);
                    var subkey = name_parts.slice(2).join('_');

                    if (!resume_data[section][itemIndex]) {
                        resume_data[section][itemIndex] = {};
                    }
                    resume_data[section][itemIndex][subkey] = field.value;
                } else if (['hard_skills', 'soft_skills', 'languages'].includes(section)) {
                    resume_data[section] = field.value.split(',').map(item => item.trim());
                } else {
                    resume_data[section] = field.value;
                }
            });

            // Clean up empty items in arrays
            ['education', 'work_experience', 'certifications', 'projects', 'awards'].forEach(section => {
                resume_data[section] = resume_data[section].filter(item => Object.keys(item).length > 0);
            });

            // Send resume_data as JSON to the backend
            $.ajax({
                type: 'POST',
                url: '{% url "store_resumeform" %}',
                headers: {
                    'X-CSRFToken': '{{ csrf_token }}'
                },
                contentType: 'application/json',
                data: JSON.stringify({ resume: resume_data }),
                success: function (response) {
                    console.log(response);
                    if (response.redirect_url) {
                        window.location.href = response.redirect_url;
                    } else {
                        hideLoadingScreen();
                        console.log('No redirect URL provided in the response');
                    }
                },
                error: function (error) {
                    hideLoadingScreen();
                    console.log('Error submitting resume data:', error);
                }
            });
        }
    });

    function validateForm() {
        var isValid = true;
        $('#resumeForm input[required], #resumeForm textarea[required]').each(function () {
            if ($(this).val().trim() === '') {
                isValid = false;
                $(this).addClass('is-invalid');
            } else {
                $(this).removeClass('is-invalid');
            }
        });

        // Email validation
        var emailInput = $('#email');
        var emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(emailInput.val())) {
            isValid = false;
            emailInput.addClass('is-invalid');
        } else {
            emailInput.removeClass('is-invalid');
        }

        return isValid;
    }

    function showLoadingScreen() {
        $('body').append('<div id="loadingScreen" style="position: fixed; top: 0; left: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5); z-index: 9999;"><div style="position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%); color: white; font-size: 24px;">Loading...</div></div>');
    }

    function hideLoadingScreen() {                                  
        $('#loadingScreen').remove();
    }
});
</script>



</body>

</html>